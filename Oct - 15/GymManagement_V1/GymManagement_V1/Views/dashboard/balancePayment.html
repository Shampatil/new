<meta name="viewport" content="width=device-width, initial-scale=1">

<form name="balancePaymentController" ng-app="gymManagementApp" ng-controller="balancePaymentController" novalidate>
    <br />
    <div class="container">

        <!--<input type="text" ng-model="careersAvailableController">-->
        <div class="col-md-12">
            <p></p>
        </div>
        <div class="container">
            <div class="col-md-12">
                <h1 class="header light gray3 fancy"><span class="colored">Balance Payment</span></h1>
            </div>
        </div><div class="col-md-12"><p></p></div><br />


        <div class="container">
            <div class="container">

                <table class="table table-striped table-bordered table-responsive">
                    <thead class="thead-inverse">
                        <tr>
                            <th>Select Record</th>
                            <!--<th style="width: 50px;">Id</th>-->
                            <th>TransactionID</th>
                            <th>MemberID</th>
                            <th>InvoiceDate</th>
                            <th>Fname</th>
                            <th>Mname</th>
                            <th>Lname</th>
                            <th>MobileNumber</th>
                            <th>InvoiceType</th>
                            <th>InvoiceTime</th>
                            <th>BillingAmount</th>
                            <th>PaidAmount</th>
                            <th>BalanceAmount</th>
                        </tr>
                    </thead>
                    <tr ng-repeat="x in invoice">
                        <td><button class="btn btn-primary" align="center" ng-click=SelectTransaction(x.TransactionID)>Select</button></td>
                        <!--<td>{{ x.ID }}</td>-->
                        <td>{{ x.TransactionID }}</td>
                        <td>{{ x.MemberID }}</td>
                        <td>{{ x.InvoiceDate }}</td>
                        <td>{{ x.FName }}</td>
                        <td>{{ x.Mname }}</td>
                        <td>{{ x.Lname }}</td>
                        <td>{{ x.MobileNumber }}</td>
                        <td>{{ x.InvoiceType }}</td>
                        <td>{{ x.InvoiceTime }}</td>
                        <td>{{ x.BillingAmount }}</td>
                        <td>{{gettotalpaid(x.TransactionID)}}</td>
                        <td>{{gettotalbalance(x.TransactionID,x.BillingAmount)}}</td>
                        <!--<td>{{x.IncludedPackages}}</td>-->
                    </tr>
                </table>

                <table class="table table-bordered table-responsive">
                    <thead class="thead-inverse">
                        <tr style="background-color:#D2B4E4">
                            <th width="10%">Invoice Id</th>
                            <th width="10%">Date</th>
                            <th width="10%">Paid</th>
                            <th width="10%">Balance</th>
                            <th width="10%">Billing</th>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                        </tr>
                    </thead>
                    <tbody>
                        <tr ng-repeat="InvTransaction in invoicetransaction">
                            <td>{{InvTransaction.ID}}</td>
                            <td>{{InvTransaction.InvoiceID}}</td>
                            <td>{{InvTransaction.TransactionID}}</td>

                            <td>{{InvTransaction.MemberId}}</td>
                            <td>{{InvTransaction.GYMID}}</td>
                            <td>{{InvTransaction.BranchID}}</td>
                            <td>{{InvTransaction.BillingAmount}}</td>
                            <td>{{InvTransaction.Paid}}</td>
                            <td>{{InvTransaction.Balance}}</td>
                            <td>{{InvTransaction.comment}}</td>
                            <td>{{InvTransaction.NextDueDate}}</td>

                        </tr>
                    </tbody>
                </table>


                <div style="overflow-x:auto;">
                    <table class=
                    <table class="table table-striped table-bordered table-responsive">
                        <thead class="thead-inverse">
                            <tr>
                                <!--<th style="width: 50px;">InvoiceID</th>-->
                                <th>TransactionID</th>
                                <th>Packagename</th>
                                <th>Base Price</th>

                                <th>Service Level Tax</th>
                                <th>Discount</th>
                                <th>Included Services</th>
                                <th>Included Taxes</th>
                            </tr>
                        </thead>
                        <tr ng-repeat="package in invoicepackages2">
                            <!--<td>{{package.InvoiceID}}</td>-->
                            <td>{{package.TransactionID}}</td>
                            <td>{{package.Packagename}}</
td>
                            </td>
                            </
                            <td>{{package.IncludedService}}</td>
                            <td>{{package.IncludedServiceLevelTaxAmount}}</td>
                            <td>{{package.PackagePrice}}</td>
                            <td>{{package.DiscountInAmount}}</td>
                            <td>
                                <table class="table table-striped table-bordered table-responsive">
                                    <thead class="thead-inverse">
                                        <tr>
                                            <!--<th style="width: 50px;">TransactionID</th>-->
                                            <th>Packagename</th>
                                            <th>Service</th>
                                            <th>Price</th>
                                            <!--<th>Discount In Percentage</th>-->
                                            <th>Discount</th>
                                            <th>Included Service Taxes</th>
                                        </tr>
                                    </thead>
                                    <tr ng-repeat="service in invoiceServices">
                                        <!--<td ng-if="package.TransactionID == service.TransactionID && package.Packagename==service.Packagename && service.TransactionID != null">{{service.TransactionID}}</td>-->
                                        <td ng-if="package.TransactionID == service.TransactionID && package.Packagename==service.Packagename && service.TransactionID != null">{{service.Packagename}}</td>
                                        <td ng-if="package.TransactionID == service.TransactionID && package.Packagename==service.Packagename && service.TransactionID != null">{{service.Service}}</td>
                                        <td ng-if="package.TransactionID == service.TransactionID && package.Packagename==service.Packagename && service.TransactionID != null">{{service.Price}}</td>

                                        <!--<td ng-if="package.TransactionID == service.TransactionID && package.Packagename==service.Packagename && service.TransactionID != null">{{service.DiscountInPercentage}}</td>-->
                                        <td ng-if="package.TransactionID == service.TransactionID && package.Packagename==service.Packagename && service.TransactionID != null">{{service.DiscountInAmount}}</td>

                                        <td ng-if="package.TransactionID == service.TransactionID && package.Packagename==service.Packagename && service.TransactionID != null">{{service.TotalTaxInAmount}}</td>
                                        <td ng-if="package.TransactionID == service.TransactionID && package.Packagename==service.Packagename && service.TransactionID != null">
                                            <table class="table table-striped table-bordered table-responsive">
                                                <thead class="thead-inverse">
                                                    <tr>
                                                        <!--<th style="width: 50px;">ID</th>
                                                        <th>InvoiceID</th>
                                                        <th>TransactionID</th>-->
                                                        <!--<th>Package Name</th>-->
                                                        <th>Tax</th>
                                                        <th>Rate</th>
                                                        <!--<th>level</th>-->
                                                    </tr>
                                                </thead>

                                                <tr ng-repeat="taxes in invoicetaxes">
                                                    <!--<td ng-if="taxes.TransactionID == service.TransactionID && taxes.PackageOrServiceName == service.Service && taxes.Taxlevel == 'Service level Tax'">{{taxes.ID}}</td>
                                                    <td ng-if="taxes.TransactionID == service.TransactionID && taxes.PackageOrServiceName == service.Service && taxes.Taxlevel == 'Service level Tax'">{{taxes.InvoiceID}}</td>
                                                    <td ng-if="taxes.TransactionID == service.TransactionID && taxes.PackageOrServiceName == service.Service && taxes.Taxlevel == 'Service level Tax'">{{taxes.TransactionID}}</td>-->
                                                    <!--<td ng-if="taxes.TransactionID == service.TransactionID && taxes.Taxlevel == 'Service level Tax' && taxes.PackageOrServiceName.indexOf(service.Packagename) > -1 && taxes.PackageOrServiceName.indexOf(service.Service) > -1">{{taxes.PackageOrServiceName}}</td>-->
                                                    <td ng-if="taxes.TransactionID == service.TransactionID && taxes.Taxlevel == 'Service level Tax' && taxes.PackageOrServiceName.indexOf(service.Packagename) > -1 && taxes.PackageOrServiceName.indexOf(service.Service) > -1">{{taxes.TaxName}}</td>
                                                    <td ng-if="taxes.TransactionID == service.TransactionID && taxes.Taxlevel == 'Service level Tax' && taxes.PackageOrServiceName.indexOf(service.Packagename) > -1 && taxes.PackageOrServiceName.indexOf(service.Service) > -1">{{taxes.Taxpercentage}}</td>
                                                    <!--<td ng-if="taxes.TransactionID == service.TransactionID && taxes.Taxlevel == 'Service level Tax' && taxes.PackageOrServiceName.indexOf(service.Packagename) > -1 && taxes.PackageOrServiceName.indexOf(service.Service) > -1">{{taxes.Taxlevel}}</td>-->
                                                </tr>

                                            </table>
                                            ab
                                        </td>
                                    </tr>
                                </table>
                            </td>
                            <td>
                                <table class="table table-striped table-bordered table-responsive">
                                    <thead class="thead-inverse">
                                        <tr>
                                            <!--<th style="width: 50px;">ID</th>
                                            <th>InvoiceID</th>
                                            <th>TransactionID</th>-->
                                            <!--<th>Package Name</th>-->
                                            <th>Tax</th>
                                            <th>Rate</th>
                                            <!--<th>level</th>-->
                                        </tr>
                                    </thead>
                                    <tr ng-repeat="packagetaxes in invoicetaxes">
                                        <!--<td ng-if="packagetaxes.TransactionID == package.TransactionID && packagetaxes.PackageOrServiceName == package.Packagename">{{packagetaxes.ID}}</td>
                                        <td ng-if="packagetaxes.TransactionID == package.TransactionID && packagetaxes.PackageOrServiceName == package.Packagename">{{packagetaxes.InvoiceID}}</td>
                                        <td ng-if="packagetaxes.TransactionID == package.TransactionID && packagetaxes.PackageOrServiceName == package.Packagename">{{packagetaxes.TransactionID}}</td>-->
                                        <!--<td ng-if="packagetaxes.TransactionID == package.TransactionID && packagetaxes.PackageOrServiceName == package.Packagename && ">{{packagetaxes.PackageOrServiceName}}</td>-->

                                        <td ng-if="packagetaxes.TransactionID == package.TransactionID && packagetaxes.PackageOrServiceName == package.Packagename">{{packagetaxes.TaxName}}</td>
                                        <td ng-if="packagetaxes.TransactionID == package.TransactionID && packagetaxes.PackageOrServiceName == package.Packagename">{{packagetaxes.Taxpercentage}}</td>
                                        <!--<td ng-if="packagetaxes.TransactionID == package.TransactionID && packagetaxes.PackageOrServiceName == package.Packagename">{{packagetaxes.Taxlevel}}</td>-->
                                    </tr>
                                </table>
      </td>
                            </td>
                        </tr>
                    </table>
                </div>
                <div class="panel-custom-horrible-red">
                    <div class="panel-heading"><label style="font-size:150%;color: #402063;  ">Payment Details</label> </div>
                    <div class="container">
                        <div class="col-md-12">
                            <p></p>
                        </div>

                        <div class="col-md-12">
                            <div class="col-md-2">
                                <label style="padding-top:8px">Transaction ID:</label>
                            </div>

                            <div class="col-md-4">
                                <input class="form-control" id="TransactionIDBalancePayment" name="TransactionIDBalancePayment" value={{BalancePaymentTransactionID}} readonly />
                            </div>

                            <div class="col-md-2">
                                <label style="padding-top:8px">Date:</label>
                            </div>
                            <div class="col-md-4">
                                <input class="form-control" id="InvoiceDate" name="InvoiceDate" value={{day1}} readonly />
                            </div>
                        </div>


                        <div class="col-md-12">
                            <br />
                            <div class="col-md-2">
                                <label style="padding-top:8px">Billing Amount:</label>
                            </div>
                            <div class="col-md-4">
                                <input class="form-control" name="BillingAmount" title="Enter MRP" id="BillingAmount" value={{balancePaymentBillingamount}} readonly>
                            </div>




                            <div class="col-md-2">
                                <label style="padding-top:8px">Total Paid :</label>
                            </div>
                            <div class="col-md-4">
                                <input class="form-control" id="BalancePaymentTotalPaid" name="BalancePaymentTotalPaid" value={{gettotalpaid(BalancePaymentTransactionID)}} readonly />
                            </div>
                            <br /><br /><br />


                            <div class="col-md-2">
                                <label style="padding-top:8px">Balance Payment:</label>
                            </div>

                            <div class="col-md-4">
                                <input class="form-control" name="BalancePayment" id="BalancePayment" value={{balancePaymentBillingamount-((gettotalpaid(BalancePaymentTransactionID)+payingAmount))}} readonly>
                            </div>


                            <div class="col-md-2">
                                <label style="padding-top:8px">Paying Amount:</label>
                            </div>
                            <div class="col-md-4">
                                <input class="form-control" ng-model="payingAmount" type="number">

                            </div>

                            <br /><br /><br />
                            <div class="col-md-2">
                                <label style="padding-top:8px">Select payment Method :</label>
                            </div>
                            <div class="col-md-4">
                                <select name="followup_Status" class="form-control" id="followup_Status" ng-model="followup_Status" ng-options="service.ServiceID as service.ServiceName for service in services">
                                    <option value="">Select Payment Method</option>
                                </select>
                            </div>

                            <div class="col-md-2">
                                <label style="padding-top:8px">Authorised By:</label>
                            </div>

                            <div class="col-md-4">
                                <input class="form-control" name="authorisedby" placeholder="Authorised person name" title="Authorised person name" ng-model="authorisedby" readonly>
                            </div>
                        </div>



                        <div id="cheque" class="col-md-12" style="display:none">
                            <br />
                            <div class="col-md-2">
                                <label style="padding-top:8px">Bank Name :</label>
                            </div>
                            <div class="col-md-4">
                                <input id="lname" name="name" placeholder="Bank Name" class="form-control">
                            </div>
                            <div class="col-md-2">
                                <label style="padding-top:8px">Cheque Number</label>
                            </div>
                            <div class="col-md-4">
                                <input id="lname" name="name" placeholder="Cheque Number" class="form-control">
                            </div>
                            <br />
                        </div>


                        <div id="cash" class="col-md-12" style="display:none">
                        </div>

                        <div id="debitcard" class="col-md-12" style="display:none">
                            <br />
                            <div class="col-md-2">
                                <label style="padding-top:8px">Card Number :</label>
                            </div>
                            <div class="col-md-4">
                                <input id="lname" name="name" placeholder="Card Number" class="form-control">
                            </div>
                            <div class="col-md-2">
                                <label style="padding-top:8px">Bank Name</label>
                            </div>
                            <div class="col-md-4">
                                <input id="lname" name="name" placeholder="Bank Name" class="form-control">
                            </div>
                            <br />
                        </div>

                        <div id="creditcard" class="col-md-12" style="display:none">
                            <br />
                            <div class="col-md-2">
                                <label style="padding-top:8px">Card Number :</label>
                            </div>
                            <div class="col-md-4">
                                <input id="lname" name="name" placeholder="Card Number" class="form-control">
                            </div>
                            <div class="col-md-2">
                                <label style="padding-top:8px">Bank Name</label>
                            </div>
                            <div class="col-md-4">
                                <input id="lname" name="name" placeholder="Bank Name" class="form-control">
                            </div>
                            <br />
                        </div>

                        <div class="col-md-12"><p></p></div>

                        <div class="col-md-12">



                            <div class="col-md-12"><p></p></div>





                            <div class="col-md-12"><p></p></div>

                            <div class="col-md-2">
                                <label style="padding-top:8px">Remark:</label>
                            </div>

                            <div class="col-md-4">
                                <input class="form-control" name="remarks" placeholder="Enter Remarks" title="Enter Remarks" ng-model="remarks">
                            </div>


                        </div>
                    </div>
                    <div class="col-md-12"><p><p></p></div><br />
                </div>
                <!--{{invoice}}-->
            </div>
            <br /><br /><br /><br />
        </div>
    </div>
    </form>





